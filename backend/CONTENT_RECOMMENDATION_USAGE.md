# 📋 内容推荐功能使用说明

## ✅ 使用步骤（已优化 UI）

### 1. 打开推荐开关
- 访问"内容推荐"页面
- **看到蓝色高亮框**，里面有"启用内容推荐"开关
- 点击开关，将其打开（变成蓝色）
- 看到提示变成"✓ 已启用 - 可以配置下方设置"

### 2. 配置推荐设置
开关打开后，下方所有设置变为可用状态：
- **每日推荐数量**：1-5 条
- **内容来源**：勾选想要的来源（RSS、微博、知乎、B站）
- **免打扰时间**：设置不接收推荐的时间段

### 3. 保存设置
- 点击底部的"保存设置"按钮
- 看到"✓ 保存成功"提示

---

## 🎨 UI 改进说明

### 新增视觉提示
1. **蓝色高亮框**：主开关区域使用蓝色背景，更醒目
2. **状态提示**：
   - 关闭时：⚠️ 请先打开此开关，然后才能配置其他设置
   - 打开时：✓ 已启用 - 可以配置下方设置
3. **黄色提示框**：开关关闭时，显示操作指引
4. **半透明效果**：禁用的设置区域显示为半透明（opacity-50）
5. **标签提示**：每个禁用的设置旁边显示"(需先启用推荐)"

### 交互改进
- 禁用状态下鼠标变为"不可点击"图标
- 所有禁用控件添加 `cursor-not-allowed` 样式
- 更清晰的视觉层次和引导

---

## 🎯 功能说明

### 启用内容推荐
- **作用**：总开关，控制是否接收推荐
- **默认**：关闭（新用户）
- **影响**：关闭时，所有其他设置都无法修改（这是正常的设计）

### 每日推荐数量
- **选项**：1、2、3、5 条
- **默认**：1 条
- **说明**：每天最多推荐的内容数量

### 内容来源
- **RSS 订阅**：科技新闻、开发者资讯
- **微博热搜**：实时热点话题
- **知乎热榜**：高质量问答
- **B站热门**：视频内容推荐
- **默认**：留空（从所有来源推荐）

### 免打扰时间
- **默认**：22:00 - 08:00
- **说明**：在此时间段内不会收到推荐通知

---

## 🔧 技术细节

### 字段映射
前端和后端使用不同的字段名：

| 前端字段 | 后端字段 | 说明 |
|---------|---------|------|
| `enabled` | `content_recommendation_enabled` | 启用开关 |
| `daily_limit` | `max_daily_recommendations` | 每日限额 |
| `preferred_sources` | `preferred_sources` | 来源列表 |
| `quiet_hours_start` | `quiet_hours_start` | 免打扰开始 |
| `quiet_hours_end` | `quiet_hours_end` | 免打扰结束 |

### API 端点
- **GET** `/api/v1/content/preference` - 获取偏好
- **PUT** `/api/v1/content/preference` - 更新偏好

---

## 💡 常见问题

### Q1: 为什么所有设置都是灰色的？
**A**: 这是正常的设计。需要先打开顶部蓝色框中的"启用内容推荐"开关。现在有明显的视觉提示和黄色提示框引导您操作。

### Q2: 打开开关后还是灰色？
**A**: 刷新页面，确保前端代码已更新。如果问题依然存在，检查浏览器控制台（F12）是否有错误。

### Q3: 保存后没有反应？
**A**: 检查浏览器控制台（F12）是否有错误信息。正常情况下会显示"✓ 保存成功"提示。

### Q4: 如何查看推荐内容？
**A**: 在"内容推荐"页面的"今日推荐"部分查看。

### Q5: 为什么要这样设计？
**A**: 这是"主开关"设计模式，防止用户在未启用功能时误配置设置。类似于手机的"飞行模式"，关闭时所有无线功能都不可用。

---

## 🎉 UI 优化完成

已完成的改进：
- ✅ 蓝色高亮主开关区域
- ✅ 动态状态提示（关闭/启用）
- ✅ 黄色操作指引提示框
- ✅ 半透明禁用效果
- ✅ 标签上的"(需先启用推荐)"提示
- ✅ 鼠标样式改进（cursor-not-allowed）

现在刷新页面，界面会更加清晰直观，用户一眼就能看到需要先打开主开关！
